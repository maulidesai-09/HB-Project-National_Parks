{% extends 'base.html' %}

{% block title %} Search Bar {% endblock %}

{% block body %}

    <h1> Search for a Park </h1>

    <div class="form-container">
        <!-- <form class="form" method="GET" action="/search/result"> -->
            <p>
                Select a park <select name="park" id="park-name" placeholder="Select a park name..">
                    <option  id="default-option-park" value="Select a park.."> Select a park.. </option>
                        {% for name in park_names %}
                    <option id="selected-option" value="{{ name }}" > {{ name }} </option>
                    {% endfor %}
                </select>
            </p>
            <p>
                <!-- <input type="submit" id="search-name" value="Search">
                <input type="submit" id="clear-name" value="Clear">  -->
            </p>
        <!-- </form> -->
    </div>


    <form class="form" method="GET" action="/search/result">
        <h2> Search </h2>

        <div class="form-container-state">
            <!-- <form class="form-state" method="GET" action="/search/result"> -->
                <p>
                    By State <select name="state" class="state-name" placeholder="Select a state..">
                        <option id="default-option-state" value=""> Select a state.. </option>
                        {% for state in all_states %}
                            <option id="selected-state" value="{{ state }}"> {{ state }} </option>
                        {% endfor %}
                    </select>
                </p>
            <!-- </form> -->
        </div>

        <!-- ORIGINAL CODE (WITHOUT DROPDOWN MENU)
        <div class="form-container-activity">
            <p>
                By Activity: <br>
                {% for activity in all_activities[:5] %}
                     <input type="checkbox" class="checkbox-activity" name="activity" value="{{ activity }}"> {{ activity }} <br>
                {% endfor %}
            </p>
        </div>
        ORIGINAL CODE (WITHOUT DROPDOWN MENU) ENDS -->


        <div class="dropdown activity">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" 
            aria-expanded="false">
            Select activity
            </button>
            <ul class="dropdown-menu">
                {% for activity in all_activities %}
                <li> 
                    <a class="dropdown-item small" href="#" data-value="{{ activity }}" tabIndex="-1"> 
                        <input type="checkbox" class="checkbox-activity" name="activity" value="{{ activity }}"/> &nbsp;{{ activity }} 
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>


<!-- 
        ORIGINAL CODE (WITHOUT DROPDOWN MENU)
        <div class="form-container-topic">
            <p>
                By Topic: <br>
                {% for topic in all_topics[:5] %}
                     <input type="checkbox" class="checkbox-topic" name="topic" value="{{ topic }}"> {{ topic }} </input> <br>
                {% endfor %}
            </p>
        </div>
        ORIGINAL CODE (WITHOUT DROPDOWN MENU) ENDS -->


        <div class="dropdown topic">
            <button class="btn btn-secondary dropdown-toggle" type="button"
            data-bs-toggle="dropdown" aria-expanded="false">
            Select topic
            </button>
            <ul class="dropdown-menu">
                {% for topic in all_topics %}
                <li> 
                    <a class="dropdown-item small" href="#" data-value="{{ topic }}" tabIndex="-1"> 
                        <input type="checkbox" class="checkbox-topic" name="topic" value="{{ topic }}"/> &nbsp;{{ topic }} 
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>


        <div class="form-container-submit">
            <p>
                <button id="search"> Search </button>
                <button id="clear"> Clear </button>
            </p>
        </div>
    
    </form>


    <h2> Search Results: </h2> 

    <div class="result">

        {% if response %}
            <ul>
                {% for park in result %}
                    <div class="result-park">
                        <li class="li"><a href="/parks/{{ park.id }}"> {{ park.park_name }} </a></li>
                        <p class="lat" hidden> {{ park.location_lat }} </p>
                        <p class="long" hidden> {{ park.location_long }} </p>
                    </div>
                {% endfor %}
            </ul>
        {% else %}
            <p> {{ result }} </p>
        {% endif %}
        
    </div>


    <p>
        <b> Location: </b>
    </p>

    <section class="map">
        <div id="map"></div>
    </section>


    <script src="/static/js/maps-search.js"></script>
    <script
        async
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBMiuAyoo-rGsBKsjt_Qav5rRB-xX7N87k&callback=initMap">
    </script>
    <script src="/static/js/search.js"> </script>
    <!-- <script src="/static/js/advance-search.js"> </script> -->

{% endblock %}